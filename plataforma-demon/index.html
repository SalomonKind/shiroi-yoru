<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiroi Yoru: Caçadores de Oni</title>
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="shortcut icon" href="src/img/favicon.ico" type="image/x-icon">
</head>
<body>

    <!-- TELA DE INTRODUÇÃO -->
    <div id="intro-overlay">
        <div class="intro-content">
            <div class="logo-container">
                <img src="src/img/logo-full-removebg-preview.png" alt="Night Assassin's" class="intro-logo">
                <div class="shine-effect"></div>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <h2 class="intro-text">Carregando a Respiração...</h2>
        </div>
    </div>

    <nav class="navbar">
        <div class="logo">Shiroi Yoru: <span style="color:var(--primary-color)">Caçadores de Oni</span></div>
        <div class="nav-actions">
            <button class="btn btn-secondary" onclick="window.app.showView('gallery')"><i class="fa-solid fa-users"></i> Galeria</button>
            <button class="btn btn-primary" onclick="window.app.newCharacter()"><i class="fa-solid fa-plus"></i> Nova Ficha</button>
        </div>
    </nav>

    <div class="main-container">
        <!-- VIEW: GALERIA -->
        <div id="view-gallery" class="view-section fade-in">
            <div class="header-title">
                <img src="src/img/logo-full-removebg-preview.png" alt="Logo" class="gallery-logo">
                <h1>Galeria de Lendas</h1>
                <p>Fichas online da comunidade.</p>
            </div>
            <div id="gallery-list" class="char-grid">
                <!-- Carregando... -->
                <p style="text-align:center; color:#666;">Conectando à nuvem...</p>
            </div>
             <footer class="gallery-footer">
        <a href="Versao-Oficial-Night-Assassins-V25.01.pdf" target="_blank" class="btn-system">
            <i class="fa-solid fa-scroll"></i> Acessar Sistema (PDF)
        </a>
        
        <div class="copyright">
            <p>&copy; 2025 Night Assassin's RPG Platform.</p>
            <p class="credits">Desenvolvido com <i class="fa-solid fa-heart" style="color:var(--primary-color)"></i> por <span style="color:var(--accent-color)">Salomão Gentil</span></p>
        </div>
    </footer>
        </div>

        <!-- VIEW: EDITOR -->
        <div id="view-editor" class="view-section hidden">
            <div class="sheet-controls">
                <button onclick="window.app.showView('gallery')" class="btn btn-secondary">Voltar</button>
                <button onclick="window.app.saveCharacter()" class="btn btn-primary">Salvar na Nuvem</button>
                <button onclick="window.app.deleteCharacter()" class="btn btn-danger">Excluir</button>
            </div>

            <div class="container-sheet slide-up">
                <!-- O conteúdo do formulário continua idêntico ao anterior -->
                <header>
                    <div class="avatar-frame">
                        <img src="https://via.placeholder.com/150" alt="Avatar" id="avatar-preview">
                        <label for="avatar-upload" class="upload-overlay"><i class="fa-solid fa-camera"></i></label>
                        <input type="file" id="avatar-upload" accept="image/*" onchange="window.app.handleAvatarUpload(this)" style="display:none">
                    </div>
                    <div class="header-info">
                        <div class="campaign-tag">Campanha: Shiroi Yoru</div>
                        <div class="input-effect">
                            <input type="text" id="char-name" class="input-h1" placeholder="Nome do Personagem">
                            <span class="focus-border"></span>
                        </div>
                        <div class="input-effect">
                            <input type="text" id="char-jpname" class="input-jp" placeholder="Nome Japonês">
                            <span class="focus-border"></span>
                        </div>
                        <div class="identity-grid">
                            <div class="identity-item">
                                <strong>Raça:</strong> 
                                <select id="char-race" onchange="window.app.toggleEnergy()">
                                    <option value="Exterminador">Exterminador</option>
                                    <option value="Oni">Oni</option>
                                </select>
                            </div>
                            <div class="identity-item"><strong>Patente:</strong> <input type="text" id="char-rank"></div>
                            <div class="identity-item"><strong>Idade:</strong> <input type="text" id="char-age"></div>
                            <div class="identity-item"><strong>Jogador:</strong> <input type="text" id="char-player"></div>
                            <div class="identity-item" style="grid-column: 1 / -1;"><strong>Conceito:</strong> <input type="text" id="char-concept" class="full-width"></div>
                        </div>
                    </div>
                </header>

                <!-- Atributos -->
                <div class="section-title">Atributos</div>
                <div class="content-pad">
                    <!-- index.html (Seção de Atributos Corrigida) -->
<div class="attributes-grid">
    <div class="attr-card hover-scale" onclick="window.app.rollAttr('dex')">
        <span class="attr-name">DEX</span>
        <input type="number" id="attr-dex" value="1" onclick="event.stopPropagation()">
    </div>
    <div class="attr-card hover-scale" onclick="window.app.rollAttr('fdv')">
        <span class="attr-name">FDV</span>
        <input type="number" id="attr-fdv" value="1" onclick="event.stopPropagation()">
    </div>
    <div class="attr-card hover-scale" onclick="window.app.rollAttr('vit')">
        <span class="attr-name">VIT</span>
        <input type="number" id="attr-vit" value="1" onclick="event.stopPropagation()">
    </div>
    <div class="attr-card hover-scale" onclick="window.app.rollAttr('sab')">
        <span class="attr-name">SAB</span>
        <input type="number" id="attr-sab" value="1" onclick="event.stopPropagation()">
    </div>
    <div class="attr-card hover-scale" onclick="window.app.rollAttr('for')">
        <span class="attr-name">FOR</span>
        <input type="number" id="attr-for" value="1" onclick="event.stopPropagation()">
    </div>
    <div class="attr-card hover-scale" onclick="window.app.rollAttr('int')">
        <span class="attr-name">INT</span>
        <input type="number" id="attr-int" value="1" onclick="event.stopPropagation()">
    </div>
    <div class="attr-card hover-scale" onclick="window.app.rollAttr('car')">
        <span class="attr-name">CAR</span>
        <input type="number" id="attr-car" value="1" onclick="event.stopPropagation()">
    </div>
</div>
                </div>

                <!-- Status -->
                <div class="section-title">Status</div>
                <div class="content-pad">
                    <div class="bars-container">
                        <div class="resource-box"><div><span class="attr-name">PDV</span><div class="res-controls"><input type="number" id="hp-curr"> / <input type="number" id="hp-max"></div></div></div>
                        <div class="resource-box"><div><span class="attr-name" id="lbl-energy">PDR</span><div class="res-controls"><input type="number" id="en-curr"> / <input type="number" id="en-max"></div></div></div>
                        <div class="resource-box"><div><span class="attr-name">DESLOCAMENTO</span><input type="text" id="char-speed" class="simple-input"></div></div>
                        <div class="resource-box"><div style="width:100%"><span class="attr-name">INICIATIVA</span><button class="roll-btn pulse-btn" onclick="window.app.rollAttr('dex')">Rolar</button></div></div>
                    </div>
                    <div class="combat-grid">
                        <div class="card">
                            <h3>Arma Principal</h3>
                            <input type="text" id="weapon-name" class="weapon-input" placeholder="Nome">
                            <ul class="weapon-stats">
                                <li><span>Acerto (1d20 + DEX + 1)</span> <input type="text" id="weapon-hit"></li>
                                <li><span>Dano (1 Mão)</span> <input type="text" id="weapon-dmg"></li>
                                <li><span>Dano (2 Mão)</span> <input type="text" id="weapon-dmg"></li>
                                <li><span>Crítico</span> <input type="text" id="weapon-crit"></li>
                            </ul>
                            <textarea id="weapon-desc" class="small-area" placeholder="Propriedades"></textarea>
                        </div>
                        <div class="card">
                            <h3>Defesa</h3>
                            <ul class="weapon-stats">
                                <li><span>Esquiva (DEX)</span> <strong>1d20 + <span id="disp-dex">0</span></strong></li>
                                <li><span>Bloqueio (FOR)</span> <strong>1d20 + <span id="disp-for">0</span></strong></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Texto Areas -->
                <div class="section-title">Habilidades</div>
                <div class="content-pad"><div class="card"><textarea id="char-skills" class="large-area"></textarea></div></div>
                
                <div class="section-title">Equipamento & Lore</div>
                <div class="content-pad">
                    <div class="combat-grid">
                        <div class="card"><h3>Inventário</h3><textarea id="char-inventory" class="medium-area"></textarea></div>
                        <div class="card"><h3>História</h3><textarea id="char-lore" class="medium-area"></textarea></div>
                    </div>
                </div>

                <!-- Galeria Fotos -->
                <div class="section-title">Fotos</div>
                <div class="content-pad">
                    <div style="margin-bottom:15px;"><label for="gallery-upload" class="btn btn-primary"><i class="fa-solid fa-plus"></i> Add Foto</label><input type="file" id="gallery-upload" accept="image/*" onchange="window.app.addGalleryImage(this)" style="display:none"></div>
                    <div id="char-gallery-grid" class="gallery-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast & Modal -->
    <div id="toast-container"></div>
    <div id="diceModal" class="modal" onclick="window.app.closeModal(event)">
        <div class="modal-content pop-in">
            <h2 id="roll-title">Rolagem</h2>
            <div class="dice-result" id="roll-result">0</div>
            <div class="dice-detail" id="roll-calc">d20 + 0</div>
            <button class="close-btn" onclick="document.getElementById('diceModal').style.display='none'">Fechar</button>
        </div>
    </div>

    <!-- IMPORTANTE: TIPO MODULE PARA USAR FIREBASE -->
    <script type="module" src="src/js/script.js"></script>
</body>
</html>